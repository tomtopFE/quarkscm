var TT_NS=function(c,a){c.address={init:function(){this.checkPhoneNumber();this.checkPostCode();this.creatRegion()},checkPhoneNumber:function(){a(document).on("input propertychange",".m_set_address .phone_val",function(){var b=a(this).val().replace(/[^\d]{1,30}/gi,"");a(this).val(b)})},checkPostCode:function(){a(document).on("input propertychange",".m_set_address .postCode_val",function(){var b=a(this).val().replace(/(^[^A-Za-z0-9]+)|([^\s\w-]+)|[/_]/gi,"").replace(/[\s-]{2,}/gi,"").replace(/([\s\w-]{1,20})(.*)/,"$1");a(this).val(b)});a(document).on("blur",".m_set_address .postCode_val",function(){var b=a(this).val(),d=b.substring(b.length-1,b.length);if(" "==d||"-"==d)b=b.substring(0,b.length-1),a(this).val(b)})},creatRegion:function(){var b=null;a(document).on("click",".m_set_address .all_country li",function(){var d=a(".m_set_address .phone_val").val(),c=a(this).attr("areacode");a(this).attr("countrycode");var e=a(this).attr("countryid");a(".region_wrap").find(".region_val").removeAttr("readonly");""!=c&&(d=c+d,a(".m_set_address .phone_val").val(d));a(".m_set_address .region_val").val("");a(".region_wrap .arrow").hide();a(".region_wrap").find(".region_more").hide();a.ajax({type:"GET",url:"/site/get-province",data:{countryId:e},dataType:"json",success:function(b){if(1==b.ret){var c="",d;for(d in b.data)c+="\x3cli\x3e\x3cspan\x3e"+b.data[d].name+"\x3c/span\x3e\x3c/li\x3e";a(".region_wrap ul").empty().html(c);""!=c&&(a(".region_wrap").find(".region_val").attr("readonly","readonly"),a(".region_wrap .arrow").show(),a(".region_wrap").find(".region_more").show(),a(".region_wrap .arrow").toggleClass("up"))}}});b=a(".region_wrap .arrow").css("display")});"none"!=b&&this.ulSelect()},ulSelect:function(){a(document).on("keyup",".region_more .search_region",function(){var b=a(this).val().toLowerCase();a(this).parents(".region_more").find("li").each(function(){-1!=a(this).find("span").text().toLowerCase().search(b)?a(this).show():a(this).hide()})});a(document).on("click",".region_wrap .region_val,.region_wrap .arrow",function(){var b=a(this).parents(".region_wrap").find(".region_more");0<b.find("li").size()&&(b.slideToggle(),a(".region_wrap .arrow").toggleClass("up"))});a(document).on("click",".region_wrap ul li",function(b){b.stopPropagation();a(this).parents(".region_more").slideToggle();a(".region_wrap .arrow").toggleClass("up");b=a(this).text();a(this).parents(".region_wrap").find(".region_val").val(b)});a(document).on("mouseleave",".region_wrap",function(){a(this).find(".region_more").slideUp();a(".region_wrap .arrow").removeClass("up")})}};c.address.init();return c}(window.TT_NS||{},jQuery);